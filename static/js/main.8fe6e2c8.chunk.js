(this["webpackJsonpreact_movies-list-fetch-movies"]=this["webpackJsonpreact_movies-list-fetch-movies"]||[]).push([[0],{16:function(e,t,i){},17:function(e,t,i){},18:function(e,t,i){},20:function(e,t,i){},21:function(e,t,i){"use strict";i.r(t);var c=i(7),a=i.n(c),s=(i(14),i(9)),n=i(8),r=i(2),o=i(6),l=i.n(o),d=i(1),j=(i(16),i(17),i(18),i(0)),m=function(e){var t=e.movie;return Object(j.jsxs)("div",{className:"card","data-cy":"movieCard",children:[Object(j.jsx)("div",{className:"card-image",children:Object(j.jsx)("figure",{className:"image is-4by3",children:Object(j.jsx)("img",{"data-cy":"moviePoster",src:null===t||void 0===t?void 0:t.imgUrl,alt:"Film logo"})})}),Object(j.jsxs)("div",{className:"card-content",children:[Object(j.jsxs)("div",{className:"media",children:[Object(j.jsx)("div",{className:"media-left",children:Object(j.jsx)("figure",{className:"image is-48x48",children:Object(j.jsx)("img",{src:"images/imdb-logo.jpeg",alt:"imdb"})})}),Object(j.jsx)("div",{className:"media-content",children:Object(j.jsx)("p",{className:"title is-8","data-cy":"movieTitle",children:null===t||void 0===t?void 0:t.title})})]}),Object(j.jsxs)("div",{className:"content","data-cy":"movieDescription",children:[null===t||void 0===t?void 0:t.description,Object(j.jsx)("br",{}),Object(j.jsx)("a",{href:null===t||void 0===t?void 0:t.imdbUrl,"data-cy":"movieURL",children:"IMDB"})]})]})]})},u=function(e){var t=e.movies;return Object(j.jsx)("div",{className:"movies",children:t.map((function(e){return Object(j.jsx)(m,{movie:e},e.imdbId)}))})},b=(i(20),function(e){var t=e.inputValue,i=e.setInputValue,c=e.loadMovie,a=e.movie,s=e.showError,n=e.setShowError,o=e.showLoading,l=e.setShowLoading,u=e.onAddMovie,b=e.showMovie,v=Object(d.useState)(!1),h=Object(r.a)(v,2),O=h[0],p=h[1];return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("form",{className:"find-movie",onSubmit:function(e){e.preventDefault(),c(),p(!0),l(!0)},children:[Object(j.jsxs)("div",{className:"field",children:[Object(j.jsx)("label",{className:"label",htmlFor:"movie-title",children:"Movie title"}),Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("input",{"data-cy":"titleField",type:"text",id:"movie-title",placeholder:"Enter a title to search",className:"input is-danger",value:t,onChange:function(e){var t=e.target;i(t.value),n(!1)}})}),s&&Object(j.jsx)("p",{className:"help is-danger","data-cy":"errorMessage",children:"Can't find a movie with such a title"})]}),Object(j.jsxs)("div",{className:"field is-grouped",children:[Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("button",{"data-cy":"searchButton",type:"submit",className:"button is-".concat(o?"loading":"light"),disabled:!t,children:"Find a movie"})}),O&&Object(j.jsx)("div",{className:"control",children:Object(j.jsx)("button",{"data-cy":"addButton",type:"button",className:"button is-primary",onClick:function(){return u()},children:"Add to the list"})})]})]}),Object(j.jsxs)("div",{className:"container","data-cy":"previewContainer",children:[Object(j.jsx)("h2",{className:"title",children:"Preview"}),b&&Object(j.jsx)(m,{movie:a})]})]})});var v=function(){var e=Object(d.useState)([]),t=Object(r.a)(e,2),i=t[0],c=t[1],a=Object(d.useState)(""),o=Object(r.a)(a,2),m=o[0],v=o[1],h=Object(d.useState)(null),O=Object(r.a)(h,2),p=O[0],x=O[1],f=Object(d.useState)(!1),g=Object(r.a)(f,2),N=g[0],w=g[1],y=Object(d.useState)(!1),S=Object(r.a)(y,2),E=S[0],I=S[1],M=Object(d.useState)(!1),k=Object(r.a)(M,2),F=k[0],C=k[1],L=function(e){var t=e.Poster,i=e.Title,c=e.Plot,a=e.imdbID;x({title:i,description:c,imdbUrl:"https://www.imdb.com/title/".concat(a),imdbId:a,imgUrl:"N/A"===t?"https://via.placeholder.com/360x270.png?text=no%20preview":t})},U=function(){var e=Object(n.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,I(!0),e.next=4,(i=m,fetch("".concat("https://www.omdbapi.com/?apikey=942d14a8","&t=").concat(i)).then((function(e){return e.json()})).catch((function(){return{Response:"False",Error:"unexpected error"}}))).finally((function(){return I(!1)}));case 4:if(t=e.sent,C(!0),!("Error"in t)){e.next=10;break}throw new Error("Error");case 10:L(t),w(!1);case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),x(void 0),w(!0),C(!1);case 19:case"end":return e.stop()}var i}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"page",children:[Object(j.jsx)("div",{className:"page-content",children:Object(j.jsx)(u,{movies:i})}),Object(j.jsx)("div",{className:"sidebar",children:Object(j.jsx)(b,{inputValue:m,setInputValue:v,loadMovie:U,movie:p,setShowError:w,showError:N,showLoading:E,onAddMovie:function(){var e=i.some((function(e){return e.imdbId===(null===p||void 0===p?void 0:p.imdbId)}));(0===i.length||!e&&p)&&p&&c([].concat(Object(s.a)(i),[p]))},setShowLoading:I,showMovie:F})})]})};a.a.render(Object(j.jsx)(v,{}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.8fe6e2c8.chunk.js.map